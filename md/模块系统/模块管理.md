<!--
 * @Author: your name
 * @Date: 2021-09-16 19:04:37
 * @LastEditTime: 2024-09-26 16:42:45
 * @LastEditors: matiastang
 * @Description: In User Settings Edit
 * @FilePath: /rust-learn/md/模块系统/模块管理.md
-->
# 模块管理

## Rust模块系统（the module system）

* `包（Packages）`： Cargo 的一个功能，它允许你构建、测试和分享 crate。
* `Crates` ：一个模块的树形结构，它形成了库或二进制项目。
* `模块（Modules）`和 `use`： 允许你控制作用域和路径的私有性。
* `路径（path）`：一个命名例如结构体、函数或模块等项的方式

执行 `cargo new project`，来创建一个新的名为 `project` 的包。
执行 `cargo new --lib restaurant`，来创建一个新的名为 `restaurant` 的库。

[crates.io社区](https://crates.io/)可以下载很多 Rust 社区成员发布的包。

## crate

crate 是 Rust 在编译时最小的代码单位。如果你用 rustc 而不是 cargo 来编译一个文件（第一章我们这么做过），编译器还是会将那个文件认作一个 crate。crate 可以包含模块，模块可以定义在其他文件，然后和 crate 一起编译，我们会在接下来的章节中遇到。

crate 有两种形式：`二进制项`和`库`。二进制项 可以被编译为可执行程序，比如一个命令行程序或者一个 web server。它们必须有一个 main 函数来定义当程序被执行的时候所需要做的事情。目前我们所创建的 crate 都是二进制项。

## `库`

`库` 并没有 main 函数，它们也不会编译为可执行程序，它们提供一些诸如函数之类的东西，使其他项目也能使用这些东西。

## 包（package）

包（package）是提供一系列功能的一个或者多个 crate。一个包会包含一个 Cargo.toml 文件，阐述如何去构建这些 crate。Cargo 就是一个包含构建你代码的二进制项的包。Cargo 也包含这些二进制项所依赖的库。其他项目也能用 Cargo 库来实现与 Cargo 命令行程序一样的逻辑。

包中可以包含至多一个库 crate(library crate)。包中可以包含任意多个二进制 crate(binary crate)，但是必须至少包含一个 crate（无论是库的还是二进制的）。

Cargo 遵循的一个约定：src/main.rs 就是一个与包同名的二进制 crate 的 crate 根。
